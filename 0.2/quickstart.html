

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart and Overview &mdash; Starfish 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Starfish 1.0 documentation" href="index.html"/>
        <link rel="next" title="Spectrum" href="spectrum.html"/>
        <link rel="prev" title="Starfish documentation" href="index.html"/>
 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5472810-5', 'auto');
  ga('send', 'pageview');

</script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Starfish</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Quickstart and Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#obtaining-model-spectra">Obtaining model spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-spectral-emulator">The Spectral Emulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spectrum-data-formats-and-runtime">Spectrum data formats and runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-driver-script">The driver script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory-usage">Memory usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spectrum.html">Spectrum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html#full-featured-spectrum-objects">Full-featured spectrum objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html#fast-spectrum-objects">Fast spectrum objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="grid_tools.html">Grid Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#module-level-methods">Module level methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#grid-interfaces">Grid Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#hdf5-creators-and-interfaces">HDF5 creators and interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#interpolators">Interpolators</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#instruments">Instruments</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#fits-creator">FITS creator</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid_tools.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#hdf5-scripts">HDF5 Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#plotting-scripts">Plotting Scripts</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Starfish</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Quickstart and Overview</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/quickstart.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="quickstart-and-overview">
<h1>Quickstart and Overview<a class="headerlink" href="#quickstart-and-overview" title="Permalink to this headline">¶</a></h1>
<p>Spectroscopic inference is typically a complicated process, with many specifications for the type of spectrum used. Therefore, <em>Starfish</em> is presented as a code framework that provides the building blocks for any spectroscopic inference code one may write. We provide a few example scripts that show how the <em>Starfish</em> objects may be combined for a typical spectroscopic inference problem.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The source code and installation instructions can be found at the Github repository for Starfish here: <a class="reference external" href="http://github.com/iancze/Starfish">http://github.com/iancze/Starfish</a></p>
</div>
<div class="section" id="obtaining-model-spectra">
<h2>Obtaining model spectra<a class="headerlink" href="#obtaining-model-spectra" title="Permalink to this headline">¶</a></h2>
<p>Currently, <em>Starfish</em> relies upon model spectra provided as a synthetic library, since any stellar synthesis step is generally prohibitively expensive for the purposes of Markov Chain Monte Carlo (MCMC) exploration. However, if you have a synthesis backend that is fast enough, please feel free to swap out the synthetic library for your synthetic backend.</p>
<p>First, you will need to download your synthetic spectral library of choice. What libraries are acceptable are dictated by the spectral range and resolution of your dataset. In general, it is preferable to start with a raw synthetic library that is sampled at least a factor of ~5 higher than your data. For our paper, we used the freely available PHOENIX library synthesized by [T. O. Husser](). Because the size of spectral libraries is typically measured in gigabytes, I would recommend starting the download process ASAP. [Here]() is an example script to download the most commonly used PHOENIX libraries.</p>
<p>More information about how to download raw spectra and use other synthetic spectra is available in <a class="reference internal" href="grid_tools.html"><em>Grid Tools</em></a>. Most of <cite>Starfish</cite>&#8216;s model functionality is provided by a few objects which provide interfaces to these spectral libraries.</p>
</div>
<div class="section" id="the-spectral-emulator">
<h2>The Spectral Emulator<a class="headerlink" href="#the-spectral-emulator" title="Permalink to this headline">¶</a></h2>
<p>For high signal-to-noise data, we found that any interpolation error can constitute a large fraction of the uncertainty budget. For lower quality data, it may be possible to use a simpler (and faster) interpolation scheme, such as tri-linear interpolation. The next step is to train the emulator on the library.</p>
<div class="section" id="pca-decomposition">
<h3>PCA decomposition<a class="headerlink" href="#pca-decomposition" title="Permalink to this headline">¶</a></h3>
<p>The spectral emulator works by reconstructing spectra from a linear combination of eigenspectra. Therefore, the first step is to deconstruct your spectral library into a set of eigenspectra using principal component analysis (PCA). Thankfully, most of the heavy lifting is already implemented by the <cite>scikit-learn</cite> package.</p>
<p>Training the Gaussian Process.</p>
</div>
</div>
<div class="section" id="spectrum-data-formats-and-runtime">
<h2>Spectrum data formats and runtime<a class="headerlink" href="#spectrum-data-formats-and-runtime" title="Permalink to this headline">¶</a></h2>
<p>High resolution data is often taken by an echelle spectrograph, with many separate spectral orders, or &#8220;chunks&#8221;, of data. This is convenient, because this means that the evaluation of each chunk is independent from the other chunks, meaning that this process can be parallelized on a computer with many cores.</p>
<p>The runtime of <em>Starfish</em> strongly scales with the number of pixels in each chunk. If instead of a chunked dataset, you have a single merged array of more than 3000 pixels, we strongly advise chunking the dataset up to speed computation time. As long as you have as many CPU cores as you do chunks, the evaluation time of <em>Starfish</em> is roughly constant with respect to the number of chunks. Therefore if you have access to a 64 core node of a cluster, <em>Starfish</em> can fit an entire ~50 order high-res echelle spectrum in about the same time as it would take to fit a single order. (For testing purposes, it may be wise to use only single order to start, however.)</p>
<p>Astronomical spectra come in a wide variety of formats. Although there is effort to [simplify](astropy/specutils) the reading of these formats, it was too complicated to present a read-write interface that would suit everyone. Therefore, <em>Starfish</em> requires that the user convert their spectra into a simple format. You can either present these as <em>numpy</em> arrays or HDF5 files. For some example scripts and data formats, see here.</p>
</div>
<div class="section" id="the-driver-script">
<h2>The driver script<a class="headerlink" href="#the-driver-script" title="Permalink to this headline">¶</a></h2>
<p>The main purpose of <em>Starfish</em> is to provide a framework for robust spectroscopic inference. This means providing a set of code that evaluates a posterior probability distribution using a non-trivial covariance matrix. In principle one could use traditional non-linear optimization techniques to find the maximum of this posterior with respect to the stellar parameters. However, because one is also keenly interested in the <em>uncertainties</em> on the best-fitting parameters, we must use an optimization technique that explores the full posterior, such as Markov Chain Monte Carlo (MCMC).</p>
<p>Because each dataset is different, it is the user&#8217;s responsibility to modify the MCMC driver script to suit their needs. We provide a few different example scripts [here] to get you started. More information about writing these scripts is [here].</p>
<p><em>Starfish</em> relies upon a modified version of <em>emcee</em>, a popular Markov Chain Monte Carlo package, to run a Gibbs sampler, available here: LINK. To help examine the output of any MCMC run and generate plots of the samples, we also provide some helpful command-line <a class="reference internal" href="scripts.html"><em>Scripts</em></a>.</p>
</div>
<div class="section" id="memory-usage">
<h2>Memory usage<a class="headerlink" href="#memory-usage" title="Permalink to this headline">¶</a></h2>
<p>In our testing, <em>Starfish</em> requires a moderate amount of RAM per process (~0.5 Gb per process) for a spectrum that has chunk sizes of ~3000 pixels.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spectrum.html" class="btn btn-neutral float-right" title="Spectrum"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Starfish documentation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-14, Ian Czekala.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>